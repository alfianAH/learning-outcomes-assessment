{% with id=widget.attrs.id %}
    <ol class="flex flex-col sm:grid sm:grid-cols-2 list-numbered {% if widget.attrs.class %}{{ widget.attrs.class }}{% endif %}" 
        {% if id %}id="{{ id }}"{% endif %}
        role="list">

        {% for group, options, index in widget.optgroups %}
            {% for option in options %}
                <li class="list-item-model-a" role="listitem">
                    <div class="flex space-x-2.5">
                        {% include option.template_name with widget=option %}
                        
                        {% if option.badge_template %}
                            {% include option.badge_template with widget=option %}
                        {% endif %}
                    </div>
                    
                    {% if option.custom_field_template %}
                        {% include option.custom_field_template with widget=option %}
                    {% endif %}
                </li>
            {% endfor %}
        {% endfor %}
    </ol>

    {% comment %} <ul{% if id %} id="{{ id }}"{% endif %}{% if widget.attrs.class %} class="{{ widget.attrs.class }}"{% endif %}>
        {% for group, options, index in widget.optgroups %}
            {% if group %}
                <li>{{ group }}
                    <ul{% if id %} id="{{ id }}_{{ index }}"{% endif %}>
            {% endif %}
                    {% for option in options %}
                        <li>
                            {% include option.template_name with widget=option %}
                        </li>
                    {% endfor %}
            {% if group %}
                    </ul>
                </li>
            {% endif %}
        {% endfor %}
    </ul> {% endcomment %}
{% endwith %}
